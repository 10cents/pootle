{% extends 'user/base.html'  %}
{% load humanize i18n profile_tags %}

{% block body_id %}profile-page{% endblock %}

{% block header_block %}{% endblock %}
{% block breadcrumbs_block %}{% endblock %}

{% block content %}
<div id="user-profile" lang="{{ LANGUAGE_CODE }}">

  <div id="user-meta">
    <img src="{{ profile|gravatar:150 }}" width="150" height="150"
    {% if user == profile %} title="{% trans "You can set or change your avatar image at www.gravatar.com" %}"{% endif %} />
    <h1 class="user-name">{{ profile.display_name }}</h1>
    {% if user == profile %}
    <div><a href="{% url 'pootle-profile-edit' %}" class="btn btn-primary">{% trans 'Edit Profile' %}</a></div>
    {% endif %}
  </div>

  <div id="user-stats">
    <h2 class="user-score-title">{% trans 'Score:' %}</h2>
    <h3 class="user-score">{{ profile.public_score|intcomma }}</h3>

    <h3 class="user-position">
    {% with pos=profile.top_language.0 lang=profile.top_language.1 %}
    {% if pos == -1 %}
      {% trans 'No contributions in the last month!' %}
    {% else %}
      {% blocktrans with lang_name=lang.fullname url=lang.get_absolute_url %}#{{ pos }} contributor in <a href="{{ url }}">{{ lang_name }}</a> for this month{% endblocktrans %}
    {% endif %}
    {% endwith %}
    </h3>

    {% with last_event=profile.last_event %}
    {% if last_event %}
    <div class="user-last-activity">
      <div class="label">{% trans 'Latest activity:' %}</div>
      {{ last_event.get_submission_message }}
    </div>
    {% endif %}
    {% endwith %}
  </div>

  {% if profile.bio or profile.has_contact_details %}
  <div id="user-details">
    {% if profile.has_contact_details %}
    <ul class="user-contact">
      {% if profile.website %}
      <li><a href="{{ profile.website }}"><i class="icon-user-website"></i>{% trans 'My Website' %}</a></li>
      {% endif %}
      {% if profile.twitter %}
      <li><a href="{{ profile.twitter_url }}"><i class="icon-user-twitter"></i>@{{ profile.twitter }}</a></li>
      {% endif %}
      {% if profile.linkedin %}
      <li><a href="{{ profile.linkedin }}"><i class="icon-user-linkedin"></i>{% trans 'My LinkedIn Profile' %}</a></li>
      {% endif %}
    </ul>
    {% endif %}
    {% if profile.bio %}
    <div class="user-bio">{{ profile.bio }}</div>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endblock %}

{% block scripts_extra %}
{{ block.super }}
<script type="text/javascript">
$(function() {
  PTL.common.updateRelativeDates();
  setInterval(PTL.common.updateRelativeDates, 6e4);
});
</script>
{% endblock %}

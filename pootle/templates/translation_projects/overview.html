{% extends "translation_projects/base.html" %}
{% load assets baseurl cache cleanhtml i18n locale progressbar search translation_project_tags common_tags profile_tags %}
{% load url from future %}
{% get_current_language as LANGUAGE_CODE %}

{% block body_id %}tpoverview{% endblock %}

{% block breadcrumbs %}
  {{ block.super }}
  {% cache settings.CACHE_TIMEOUT path_trail resource_obj.id %}
  <li class="file-path"><a href="{{ translation_project.pootle_path|l }}">{{ project.code }}</a> / {{ resource_obj|trail:"/" }}</li>
  {% endcache %}
{% endblock %}

{% block search %}{% render_search %}{% endblock %}

{% block content %}
<div class="hd">
  <h2>
    {{ summary }}
    (<a id="js-path-summary" data-target="js-path-summary-more" href="{{ url_path_summary_more }}">{% trans "Expand details" %}</a>)
  </h2>
</div>

<div class="path-summary-more" id="js-path-summary-more" data-loaded="false" data-collapsed="true">
</div>

<div id="path-summary" class="bd">
  <ul>
    {% for summary_item in path_summary %}
    <li>{{ summary_item|safe }}</li>
    {% endfor %}
  </ul>
  {% progressbar stats stats.total.words %}
</div>

{% if table %}
<div class="bd">
  <div class="files-subfolders" lang="{{ LANGUAGE_CODE }}">
    {% display_table table %}
  </div>
</div>
{% endif %}

{% endblock content %}

{% block postcontent %}
{% include "core/_top_contributors.html" %}
{% endblock postcontent %}

{% block scripts_extra %}
{{ block.super }}
<script type="text/javascript">
$(function() {
  PTL.search.init();

  PTL.common.updateRelativeDates();
  setInterval(PTL.common.updateRelativeDates, 6e4);
});
</script>
{% if user.is_superuser or request.permissions.administrate %}
{% assets "js_admin" %}
<script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}
{% endif %}
{% endblock %}
